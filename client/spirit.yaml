sources:
  spirit:
    type: MVT
    url: http://localhost:8080/maps/spirit/{z}/{x}/{y}
    max_zoom: 15
scene:
  background:
    color: &land-color '#edf5e8'

styles:
  overlay-lines:
    base: lines
    blend: translucent
  overlay-polygons:
    base: polygons
    blend: translucent
  labels:
    base: text
    draw:
      priority: 900
      text_wrap: 7
      font:
        family: Noto Sans
        size: 14px
        fill: 'black'
        stroke:
          color: 'white'
          width: 1.75px
  linelabels:
    base: text
    draw:
      priority: 900
      text_wrap: false
      font:
        family: Noto Sans
        size: 14px
        fill: 'black'
        stroke:
          color: 'white'
          width: 1.75px
layers:
  water:
    data: { source: spirit }
    draw:
      polygons:
        order: 300
        color: &water-color '#bdd7e7'
  waterways:
    data: { source: spirit }
    rivers:
      filter:
        waterway: river
      draw:
        lines:
          order: 310
          color: *water-color
          width: [[8, 0.1px], [9, 0.2px], [10, 0.4px], [11, 0.6px], [12, 0.8px], [13, 1px], [14, 1.5px], [15, 2px], [16, 3px], [17, 4px], [18, 5px], [19, 6px], [20, 7px]]
    streams:
      filter:
        waterway: stream
      draw:
        lines:
          order: 310
          color: *water-color
          width: [[12, 0px], [13, 0.2px], [14, 0.4px], [15, 0.6px], [16, 0.8px], [17, 1px], [18, 1.5px], [19, 2px]]
    small-waterway:
      filter:
        waterway: [ditch, drain]
      draw:
        lines:
          order: 310
          color: *water-color
          width: [[15, 0.1px], [16, 0.3px], [17, 0.5px], [18, 0.7px], [19, 1px], [20, 1.5px]]
    waterway_names:
      draw:
        linelabels:
          order: 700
          priority: 100
          font:
            fill: '#0868AD'
            stroke:
              color: '#EFF2FB'

  water_names:
    data: { source: spirit }
    draw:
      labels:
        order: 700
        priority: 100
        font:
          fill: '#0868AD'
          stroke:
            color: '#EFF2FB'


  landcover:
    data: { source: spirit }
    industrial:
      filter:
        landuse: industrial
      draw:
        polygons:
          order: 400
          color: '#E9E4D5'
    residential:
      filter:
        landuse: residential
      draw:
        polygons:
          order: 400
          color: '#F5F0E0'
    trees:
      filter:
        - landuse: forest
        - natural: wood
      draw:
        polygons:
          order: 450
          color: '#CCE5CE' # [zoom<=14] { polygon-fill:lighten(@landuse_green2,10%); }
    pitch:
      filter:
        leisure: pitch
      draw:
        polygons:
          order: 420
          color: '#CCE5CE' # [zoom<=14] { polygon-fill:lighten(@landuse_green2,10%); } }
    grass:
      filter:
        landuse: grass
      draw:
        polygons:
          order: 430
          color: '#BBDBB2'
    common:
      filter:
        leisure: common
      draw:
        polygons:
          order: 410
          color: '#BBDBB2'
    park:
      filter:
        leisure: park
      draw:
        polygons:
          order: 410
          color: '#BBDBB2'
    golf_course:
      filter:
        leisure: golf_course
      draw:
        polygons:
          order: 410
          color: '#BBDBB2'
    golf_course:
      filter:
        leisure: golf_course
      draw:
        polygons:
          order: 410
          color: '#BBDBB2'
    draw:
      polygons:
        order: 300
        color: 'red'

  parks:
    data: { source: spirit }
    filter:
      leisure: nature_reserve
    draw:
      overlay-lines:
        order: 480
        color: rgba(120,186,125,0.3)
        width: [[6, 0.4px], [10, 1px], [12, 2px]]
        dash: [2, 2]
      overlay-polygons:
        order: 480
        color: rgba(120,186,125,0.1)

  boundaries:
    data: { source: spirit }
    a2:
      filter:
        admin_level: [0, 1, 2]
      draw:
        overlay-lines:
          order: 510
          color: &boundary-color purple
          width: [[4, 0.3px], [8, 1px]]
    a4:
      filter:
        admin_level: [3, 4]
        $zoom: { min: 4 }
      draw:
        overlay-lines:
          order: 508
          color: [0.5,0,0.5, 0.5]
          width: [[4, 0.5px], [8, 1.5px]]
          dash: [1.5, 3.5]

  buildings:
    data: { source: spirit }
    draw:
      polygons:
        order: 600
        color: '#EDEBDD'
      lines:
        order: 601
        color: '#EEE7BA'
        width: 0.2px
